# üìö –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ ST-Link V2

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ ST-Link?

**ST-Link** - —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä –∏ –æ—Ç–ª–∞–¥—á–∏–∫ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ STM32.

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω ST-Link?

–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä STM32 - —ç—Ç–æ –Ω–µ Arduino —Å USB bootloader'–æ–º. –ß—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –≤ STM32, –Ω—É–∂–µ–Ω **–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä**.

```diagram
–ö–æ–º–ø—å—é—Ç–µ—Ä ‚Üí ST-Link (–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä) ‚Üí STM32 (–º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)
  USB         SWD/JTAG –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å       –í–∞—à–∞ –ø–ª–∞—Ç–∞
```

### –ß—Ç–æ —É–º–µ–µ—Ç ST-Link:

- ‚úÖ –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ Flash –ø–∞–º—è—Ç—å STM32
- ‚úÖ –û—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∫–æ–¥ (breakpoints, step-by-step)
- ‚úÖ –ß–∏—Ç–∞—Ç—å –ø–∞–º—è—Ç—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
- ‚úÖ –°–±—Ä–∞—Å—ã–≤–∞—Ç—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

### –í–∞—à –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä: ST-Link V2 Mini

- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** USB 2.0 Full Speed (12 –ú–±–∏—Ç/—Å)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª—ã:** SWD (Serial Wire Debug) –∏ JTAG
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –í—Å–µ STM32 –∏ STM8 –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- **–ü–∏—Ç–∞–Ω–∏–µ:** 5V –æ—Ç USB –∏–ª–∏ 3.3V –æ—Ç —Ü–µ–ª–µ–≤–æ–π –ø–ª–∞—Ç—ã

---

## ‚ùì –ó–∞—á–µ–º –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–æ—à–∏–≤–∫—É ST-Link?

–ü—Ä–æ—à–∏–≤–∫–∞ ST-Link - —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–∞–º–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–∞.

### –ü—Ä–∏—á–∏–Ω—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. **üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤**
   - –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ
   - –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —á–∏–ø–æ–≤

2. **‚ö° –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π STM32
   - –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ STM32CubeProgrammer

3. **üîß –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
   - –ù–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ PlatformIO –∏ IDE —Ç—Ä–µ–±—É—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –ø—Ä–æ—à–∏–≤–∫—É
   - –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ—à–∏–≤–∫–∏

–û–±—ã—á–Ω–æ –∫–∏—Ç–∞–π—Å–∫–∏–µ ST-Link V2 –∏–¥—É—Ç —Å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –ø—Ä–æ—à–∏–≤–∫–æ–π. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ STLinkUpgrade.

---

## üõ†Ô∏è –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1Ô∏è‚É£: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Java

STLinkUpgrade –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Java, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–∞ Java Runtime Environment (JRE).

#### –ß—Ç–æ —Ç–∞–∫–æ–µ Java?

**Java** - —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º. –ú–Ω–æ–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è STLinkUpgrade) –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ Java –∏ —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é JVM (Java Virtual Machine).

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ Java

```bash
java -version
```

**–ï—Å–ª–∏ Java –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:**

```
The operation couldn't be completed. Unable to locate a Java Runtime.
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenJDK —á–µ—Ä–µ–∑ Homebrew

**OpenJDK** - —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∏ –æ—Ç–∫—Ä—ã—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Java.

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Homebrew
which brew

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Java
brew install openjdk
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. Homebrew —Å–∫–∞—á–∏–≤–∞–µ—Ç OpenJDK 25 (–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è)
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∏, —à—Ä–∏—Ñ—Ç—ã)
3. –†–∞–∑–º–µ—â–∞–µ—Ç Java –≤ `/opt/homebrew/opt/openjdk/`

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Java –≤ PATH

Java —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –µ—ë "–Ω–µ –≤–∏–¥–∏—Ç". –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è PATH:

```bash
# –î–æ–±–∞–≤–∏—Ç—å Java –≤ PATH –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
export PATH="/opt/homebrew/opt/openjdk/bin:$PATH"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
java -version
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:**

```
openjdk version "25.0.2" 2026-01-20
OpenJDK Runtime Environment Homebrew (build 25.0.2)
OpenJDK 64-Bit Server VM Homebrew (build 25.0.2, mixed mode, sharing)
```

#### –°–¥–µ–ª–∞—Ç—å Java –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–æ—Å—Ç–æ—è–Ω–Ω–æ

–ß—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å `export PATH=...` –∫–∞–∂–¥—ã–π —Ä–∞–∑:

```bash
echo 'export PATH="/opt/homebrew/opt/openjdk/bin:$PATH"' >> ~/.zshrc
```

–¢–µ–ø–µ—Ä—å Java –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏.

---

### –®–∞–≥ 2Ô∏è‚É£: –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ STLinkUpgrade

STLinkUpgrade –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≤–∏–¥–µ –∞—Ä—Ö–∏–≤–∞ `.tar.gz`.

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É —Å –∞—Ä—Ö–∏–≤–æ–º
cd ~/Downloads/stsw-link007/MacOS

# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
tar -xzf STLinkUpgrade.app.tar.gz
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

- `tar` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Ä—Ö–∏–≤–∞–º–∏
- `-x` - –∏–∑–≤–ª–µ—á—å (extract)
- `-z` - —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å gzip
- `-f` - —Ñ–∞–π–ª

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
STLinkUpgrade.app/
‚îú‚îÄ‚îÄ Contents/
‚îÇ   ‚îú‚îÄ‚îÄ MacOS/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ javaLauncher           # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ Resources/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ STLinkUpgrade.jar  # –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ native/
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ mac_x64/       # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Intel Mac
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ mac_x64_arm64/ # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Apple Silicon
‚îÇ   ‚îî‚îÄ‚îÄ Info.plist                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

---

### –®–∞–≥ 3Ô∏è‚É£: –û–±—Ö–æ–¥ macOS Security (Gatekeeper)

macOS –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

#### –ß—Ç–æ —Ç–∞–∫–æ–µ Quarantine?

–ü—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ macOS –ø–æ–º–µ—á–∞–µ—Ç –µ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–æ–º `com.apple.quarantine`:

```bash
xattr -l STLinkUpgrade.app
```

**–í—ã–≤–æ–¥:**

```
com.apple.quarantine: 0281;00000000;;7D299FDF-A714-4E8A-8045-B2334FAC2AF5
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ Gatekeeper'–æ–º.

#### –°–∏–º–ø—Ç–æ–º: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ —Å—Ä–∞–∑—É –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

–ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ `open STLinkUpgrade.app`, macOS:

1. –í–∏–¥–∏—Ç –∞—Ç—Ä–∏–±—É—Ç quarantine
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–∏—Ñ—Ä–æ–≤—É—é –ø–æ–¥–ø–∏—Å—å
3. –ü–æ–¥–ø–∏—Å—å –Ω–µ –æ—Ç Apple Developer ID ‚Üí **–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

#### –†–µ—à–µ–Ω–∏–µ: –£–¥–∞–ª–∏—Ç—å quarantine –∞—Ç—Ä–∏–±—É—Ç

```bash
xattr -dr com.apple.quarantine STLinkUpgrade.app
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**

- `xattr` - —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ —Ñ–∞–π–ª–æ–≤
- `-d` - —É–¥–∞–ª–∏—Ç—å (delete)
- `-r` - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ (–¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ .app)
- `com.apple.quarantine` - –∞—Ç—Ä–∏–±—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
xattr -l STLinkUpgrade.app
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –∏–ª–∏ –±–µ–∑ `com.apple.quarantine`.

---

### –®–∞–≥ 4Ô∏è‚É£: –ó–∞–ø—É—Å–∫ STLinkUpgrade

#### –ü—Ä–æ–±–ª–µ–º–∞: javaLauncher –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç Java

–ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
open STLinkUpgrade.app
```

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `javaLauncher` –∏—â–µ—Ç Java –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—É—Ç—è—Ö (`/Library/Java/JavaVirtualMachines/`), –Ω–æ Homebrew Java –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/opt/homebrew/opt/openjdk/`.

**–û—à–∏–±–∫–∞:**

```
Unable to locate a Java Runtime.
```

#### –†–µ—à–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å JAR –Ω–∞–ø—Ä—è–º—É—é

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É —Å JAR —Ñ–∞–π–ª–æ–º
cd STLinkUpgrade.app/Contents/Resources/app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç—ë–º –∫ –Ω–∞—Ç–∏–≤–Ω—ã–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º
/opt/homebrew/opt/openjdk/bin/java \
  -Djava.library.path=native/mac_x64_arm64 \
  -jar STLinkUpgrade.jar
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**

- `/opt/homebrew/opt/openjdk/bin/java` - –ø—É—Ç—å –∫ Java
- `-Djava.library.path=native/mac_x64_arm64` - –ø—É—Ç—å –∫ `.dylib` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º USB –¥—Ä–∞–π–≤–µ—Ä–∞
- `-jar STLinkUpgrade.jar` - –∑–∞–ø—É—Å—Ç–∏—Ç—å JAR —Ñ–∞–π–ª

#### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è Java 25

–í—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:

```
WARNING: A restricted method in java.lang.System has been called
WARNING: java.lang.System::load has been called by com.st.stlinkinterface.e
WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning
```

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** Java 25 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –¥–æ—Å—Ç—É–ø–µ –∫ –Ω–∞—Ç–∏–≤–Ω—ã–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º, –Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–ß—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**

```bash
/opt/homebrew/opt/openjdk/bin/java \
  --enable-native-access=ALL-UNNAMED \
  -Djava.library.path=native/mac_x64_arm64 \
  -jar STLinkUpgrade.jar
```

---

### –®–∞–≥ 5Ô∏è‚É£: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ST-Link

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ STLinkUpgrade –ø—Ä–æ–≤–µ—Ä–∏–º, –≤–∏–¥–∏—Ç –ª–∏ macOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

#### –ö–æ–º–∞–Ω–¥–∞: system_profiler

```bash
system_profiler SPUSBDataType | grep -A 10 -i "stlink"
```

#### –ö–æ–º–∞–Ω–¥–∞: ioreg (IO Registry)

```bash
ioreg -p IOUSB -w0 | grep -i "stlink"
```

**–í—ã–≤–æ–¥:**

```
+-o STM32 STLink@00121000  <class IOUSBHostDevice, id 0x10002f60a>
```

#### –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

```bash
ioreg -p IOUSB -l -w0 | grep -A 20 "STM32 STLink"
```

**–í–∞–∂–Ω—ã–µ –ø–æ–ª—è:**

```
"USB Product Name" = "STM32 STLink"
"USB Vendor Name" = "STMicroelectronics"
"idVendor" = 1155          # 0x0483 –≤ hex
"idProduct" = 14152        # 0x3748 –≤ hex (ST-Link V2)
"UsbExclusiveOwner" = "pid 89944, java"  # ‚úÖ –ó–∞—Ö–≤–∞—á–µ–Ω–æ Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
```

**–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç `UsbExclusiveOwner`?**

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ STLinkUpgrade –ø–æ–ª—É—á–∏–ª —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É. –ù–∏–∫–∞–∫–∞—è –¥—Ä—É–≥–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ST-Link, –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç STLinkUpgrade.

---

## üñ•Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ STLinkUpgrade

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ–≥—Ä–∞–º–º—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –æ–∫–Ω–æ —Å:

1. **Device Connected:** ST-Link V2
2. **Current Firmware:** Vx.xx.xx (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
3. **Available Firmware:** Vx.xx.xx (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
4. **–ö–Ω–æ–ø–∫–∞ "Upgrade"**

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ ST-Link –∫ USB**
2. **–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**
3. **–ù–∞–∂–º–∏—Ç–µ "Upgrade"**
4. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** (–Ω–µ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ –≤–æ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!)
5. **–ì–æ—Ç–æ–≤–æ!** –ü—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Å –Ω–æ–≤–æ–π –ø—Ä–æ—à–∏–≤–∫–æ–π

### ‚ö†Ô∏è –í–∞–∂–Ω–æ!

- **–ù–ï –æ—Ç–∫–ª—é—á–∞–π—Ç–µ** ST-Link –≤–æ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Ä–≤—ë—Ç—Å—è, ST-Link –º–æ–∂–µ—Ç "–æ–∫–∏—Ä–ø–∏—á–∏—Ç—å—Å—è"
- –û–±—ã—á–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç 10-30 —Å–µ–∫—É–Ω–¥

---

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** macOS Gatekeeper –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**

```bash
xattr -dr com.apple.quarantine STLinkUpgrade.app
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "Unable to locate a Java Runtime"

**–ü—Ä–∏—á–∏–Ω–∞:** Java –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–ª–∏ –Ω–µ –≤ PATH

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Java
brew install openjdk

# –î–æ–±–∞–≤–∏—Ç—å –≤ PATH
export PATH="/opt/homebrew/opt/openjdk/bin:$PATH"
echo 'export PATH="/opt/homebrew/opt/openjdk/bin:$PATH"' >> ~/.zshrc
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Exit code 137 (SIGKILL)

**–ü—Ä–∏—á–∏–Ω–∞:** Java 25 —É–±–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ `--enable-native-access`:

```bash
/opt/homebrew/opt/openjdk/bin/java \
  --enable-native-access=ALL-UNNAMED \
  -Djava.library.path=native/mac_x64_arm64 \
  -jar STLinkUpgrade.jar
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: ST-Link –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1:** USB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
ioreg -p IOUSB -w0 | grep -i "stlink"
```

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ USB –∫–∞–±–µ–ª—å –∏ –ø–æ—Ä—Ç.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2:** –î—Ä–∞–π–≤–µ—Ä—ã USB

–ù–∞ macOS –¥—Ä–∞–π–≤–µ—Ä—ã –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω—ã, –Ω–æ –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —è–¥—Ä–∞
kextstat | grep -i usb
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 3:** –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–ï—Å–ª–∏ macOS –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ USB:

1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
2. –ù–∞–π–¥–∏—Ç–µ Java –≤ —Å–ø–∏—Å–∫–µ –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ USB

---

## üìù –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

–ß—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –¥–ª–∏–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∫–∞–∂–¥—ã–π —Ä–∞–∑, —Å–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç.

### –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `run_stlink_upgrade.sh`

```bash
#!/bin/bash

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
APP_PATH="$HOME/Downloads/stsw-link007/MacOS/STLinkUpgrade.app"
JAR_PATH="$APP_PATH/Contents/Resources/app"
JAVA_BIN="/opt/homebrew/opt/openjdk/bin/java"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
if [ ! -f "$JAVA_BIN" ]; then
    echo "‚ùå Java –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ $JAVA_BIN"
    echo "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: brew install openjdk"
    exit 1
fi

if [ ! -d "$APP_PATH" ]; then
    echo "‚ùå STLinkUpgrade.app –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ $APP_PATH"
    exit 1
fi

# –ó–∞–ø—É—Å–∫
echo "üöÄ –ó–∞–ø—É—Å–∫ STLinkUpgrade..."
cd "$JAR_PATH" || exit 1

$JAVA_BIN \
  --enable-native-access=ALL-UNNAMED \
  -Djava.library.path=native/mac_x64_arm64 \
  -jar STLinkUpgrade.jar

echo "‚úÖ STLinkUpgrade –∑–∞–≤–µ—Ä—à—ë–Ω"
```

### –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x run_stlink_upgrade.sh
```

### –ó–∞–ø—É—Å–∫

```bash
./run_stlink_upgrade.sh
```

---

## üß† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ .dylib?

**dylib** = Dynamic Library (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞) –Ω–∞ macOS

- –≠—Ç–æ –∫–∞–∫ `.dll` –Ω–∞ Windows –∏–ª–∏ `.so` –Ω–∞ Linux
- –°–æ–¥–µ—Ä–∂–∏—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `libSTLinkUSBDriver.dylib` - –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å ST-Link —á–µ—Ä–µ–∑ USB

### –ü–æ—á–µ–º—É –¥–≤–µ –ø–∞–ø–∫–∏: mac_x64 –∏ mac_x64_arm64?

- **mac_x64** - –¥–ª—è Intel Mac (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ x86_64)
- **mac_x64_arm64** - –¥–ª—è Apple Silicon Mac (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ARM64 / M1/M2/M3)

–ö–æ–º–∞–Ω–¥–∞ `uname -m` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

```bash
uname -m
# arm64  ‚Üí Apple Silicon
# x86_64 ‚Üí Intel Mac
```

### Java Native Interface (JNI)

STLinkUpgrade –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Java, –Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å USB –Ω—É–∂–µ–Ω –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –¥–æ—Å—Ç—É–ø.

```diagram
Java –∫–æ–¥ (STLinkUpgrade.jar)
    ‚Üì
JNI (Java Native Interface)
    ‚Üì
.dylib –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (libSTLinkUSBDriver.dylib)
    ‚Üì
macOS USB –¥—Ä–∞–π–≤–µ—Ä—ã
    ‚Üì
ST-Link —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
```

### Vendor ID –∏ Product ID

USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –ø–∞—Ä–æ–π —á–∏—Å–µ–ª:

- **Vendor ID (VID)** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å
  - `0x0483` = STMicroelectronics
- **Product ID (PID)** - –º–æ–¥–µ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  - `0x3748` = ST-Link V2
  - `0x374B` = ST-Link V2-1
  - `0x374E` = ST-Link V3

–≠—Ç–∏ ID –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

---

## üéì –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—à–∏–≤–∫–∏ ST-Link:

- [ ] ‚úÖ ST-Link V2 –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PlatformIO (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–µ—Ä–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ STM32
- [ ] –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ª–∞–¥–∫—É —á–µ—Ä–µ–∑ ST-Link

### –°–ª–µ–¥—É—é—â–∏–µ —É—Ä–æ–∫–∏:

- **–£—Ä–æ–∫ 3:** –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã —á–µ—Ä–µ–∑ ST-Link
- **–£—Ä–æ–∫ 4:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–ª–∞–¥—á–∏–∫–∞ (breakpoints, step-by-step)
- **–£—Ä–æ–∫ 5:** SWD –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ä–∞—Å–ø–∏–Ω–æ–≤–∫–∞

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã ST

1. **STSW-LINK007** - STLinkUpgrade —É—Ç–∏–ª–∏—Ç–∞
   - [–°–∫–∞—á–∞—Ç—å —Å —Å–∞–π—Ç–∞ ST](https://www.st.com/en/development-tools/stsw-link007.html)

2. **ST-Link V2 —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**
   - [UM1075](https://www.st.com/resource/en/user_manual/um1075-stlinkv2-incircuit-debuggerprogrammer-for-stm8-and-stm32-stmicroelectronics.pdf)

3. **STM32CubeProgrammer** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞
   - [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç](https://www.st.com/en/development-tools/stm32cubeprog.html)

### –°–æ–æ–±—â–µ—Å—Ç–≤–∞

- [ST Community](https://community.st.com/)
- Reddit: r/embedded, r/stm32
- Telegram: STM32 –≥—Ä—É–ø–ø—ã

---

## üí° –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ú–æ–∂–Ω–æ –ª–∏ "–æ–∫–∏—Ä–ø–∏—á–∏—Ç—å" ST-Link –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏?

**A:** –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –¥–∞, –µ—Å–ª–∏ –ø—Ä–µ—Ä–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ. –ù–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ JTAG –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã ST.

### Q: –ù—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–æ—à–∏–≤–∫—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ?

**A:** –ù–µ—Ç, —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏–ª–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö —á–∏–ø–æ–≤.

### Q: –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è ST-Link V2 –æ—Ç V2-1 –∏ V3?

**A:**

- **V2** - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è, Full Speed USB
- **V2-1** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤ Nucleo –ø–ª–∞—Ç–∞—Ö
- **V3** - High Speed USB, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ UART/SPI/I2C bridge

### Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∫–∏—Ç–∞–π—Å–∫–∏–π –∫–ª–æ–Ω ST-Link?

**A:** –î–∞, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–ª–æ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç —Ö–æ—Ä–æ—à–æ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—à–∏–≤–∫–∏.

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ST-Link –Ω–∞ Apple Silicon Mac?

**A:** –î–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–∑ –ø–∞–ø–∫–∏ `native/mac_x64_arm64`.

---

**–£—Å–ø–µ—Ö–æ–≤ –≤ —Ä–∞–±–æ—Ç–µ —Å–æ STM32! üöÄ**

*–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω 15.02.2026 –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–ø—ã—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ STLinkUpgrade –Ω–∞ macOS Apple Silicon.*
