# ESP ‚Üí STM32 Black Pill - –ß–µ–∫–ª–∏—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üîß –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ

### STM32 Black Pill
- **–ú–æ–¥–µ–ª—å:** STM32F411CEU6
- **–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ:** 3.3V
- **UART –ø–∏–Ω—ã:** PA9 (TX), PA10 (RX)

### ESP Module (–≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à)
- [ ] **ESP8266 NodeMCU** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)
- [ ] **ESP32 DevKit**
- [ ] **Wemos D1 Mini**

**‚ö†Ô∏è –í–ê–ñ–ù–û:** ESP —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **3.3V**! –ù–ï –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ 5V!

---

## ‚ö° –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: ESP8266 NodeMCU ‚Üî STM32 Black Pill

```
ESP8266 NodeMCU     ‚Üí    STM32 Black Pill
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
3V3                 ‚Üí    (–Ω–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å)
GND                 ‚Üí    GND
TX  (GPIO1)         ‚Üí    PA10 (RX)
RX  (GPIO3)         ‚Üí    PA9  (TX)
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- ESP8266 –ø–∏—Ç–∞–µ—Ç—Å—è –æ—Ç USB –∏–ª–∏ –≤–Ω–µ—à–Ω–µ–≥–æ 3.3V –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- STM32 –ø–∏—Ç–∞–µ—Ç—Å—è –æ—Ç ST-Link –∏–ª–∏ USB
- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ–µ–¥–∏–Ω–∏—Ç—å GND –æ–±–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤!**
- TX ‚Üí RX, RX ‚Üí TX (–ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)

### –í–∞—Ä–∏–∞–Ω—Ç 2: ESP32 DevKit ‚Üî STM32 Black Pill

```
ESP32 DevKit        ‚Üí    STM32 Black Pill
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
3V3                 ‚Üí    (–Ω–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å)
GND                 ‚Üí    GND
TX  (GPIO1)         ‚Üí    PA10 (RX)
RX  (GPIO3)         ‚Üí    PA9  (TX)
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] ESP –º–æ–¥—É–ª—å (ESP8266 –∏–ª–∏ ESP32)
- [ ] STM32 Black Pill
- [ ] ST-Link V2 (–¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ STM32)
- [ ] USB –∫–∞–±–µ–ª—å –¥–ª—è ESP (Micro-USB –∏–ª–∏ USB-C)
- [ ] USB –∫–∞–±–µ–ª—å –¥–ª—è STM32 (Micro-USB)
- [ ] 4 –ø—Ä–æ–≤–æ–¥–∞ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤: GND —á–µ—Ä–Ω—ã–π, TX –∂–µ–ª—Ç—ã–π, RX –∑–µ–ª–µ–Ω—ã–π)

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–æ–≤
- [ ] **GND ESP ‚Üí GND STM32** (—á–µ—Ä–Ω—ã–π –ø—Ä–æ–≤–æ–¥)
- [ ] **TX ESP (GPIO1) ‚Üí PA10 STM32** (–∂–µ–ª—Ç—ã–π –ø—Ä–æ–≤–æ–¥)
- [ ] **RX ESP (GPIO3) ‚Üí PA9 STM32** (–∑–µ–ª–µ–Ω—ã–π –ø—Ä–æ–≤–æ–¥)
- [ ] **–ù–ï —Å–æ–µ–¥–∏–Ω—è—Ç—å VCC/3V3 –º–µ–∂–¥—É –ø–ª–∞—Ç–∞–º–∏!**

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∏—Ç–∞–Ω–∏—è
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å ESP –∫ USB (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–≥–æ—Ä–µ—Ç—å—Å—è)
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å STM32 –∫ ST-Link –∏–ª–∏ USB
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ–±–µ –ø–ª–∞—Ç—ã –≤–∫–ª—é—á–µ–Ω—ã

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø—Ä–æ–≤–æ–¥–æ–≤
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–æ–≤–æ–¥–∞ –Ω–µ –ø–µ—Ä–µ–ø—É—Ç–∞–Ω—ã (TX‚ÜîRX!)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ GND –æ–±—â–∏–π

---

## üñ•Ô∏è –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### ESP8266/ESP32
**–ü–û:** Arduino IDE 2.x

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞—Ç—ã:**
1. File ‚Üí Preferences ‚Üí Additional Boards Manager URLs:
   ```
   http://arduino.esp8266.com/stable/package_esp8266com_index.json
   ```
2. Tools ‚Üí Board ‚Üí Boards Manager ‚Üí –ü–æ–∏—Å–∫ "ESP8266" ‚Üí Install

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Board: "NodeMCU 1.0 (ESP-12E Module)"
- Upload Speed: 115200
- CPU Frequency: 80 MHz
- Flash Size: 4MB (FS:2MB OTA:~1019KB)
- Port: /dev/cu.usbserial-XXXX (MacOS) –∏–ª–∏ COM3 (Windows)

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ Tools ‚Üí Manage Libraries):**
- [ ] ESP8266WiFi (–≤—Å—Ç—Ä–æ–µ–Ω–∞)
- [ ] ESP8266HTTPClient (–≤—Å—Ç—Ä–æ–µ–Ω–∞)
- [ ] ArduinoJson (–≤–µ—Ä—Å–∏—è 6.x)

### STM32 Black Pill
**–ü–û:** PlatformIO (VSCode)

**–£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:**
- [x] PlatformIO
- [x] STM32 HAL –¥—Ä–∞–π–≤–µ—Ä—ã
- [x] ST-Link –ø—Ä–æ—à–∏–≤–∞–ª—å—â–∏–∫

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∏

### –¢–µ—Å—Ç 1: ESP ‚Üí STM32 (–æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
1. –ü—Ä–æ—à–∏—Ç—å ESP –∫–æ–¥–æ–º –∏–∑ `esp8266_wifi_bridge.ino`
2. –ü—Ä–æ—à–∏—Ç—å STM32 –∫–æ–¥–æ–º –∏–∑ `src/main.c` (—Å UART)
3. –û—Ç–∫—Ä—ã—Ç—å Serial Monitor ESP (115200 baud)
4. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞ STM32 ‚Üí –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ ESP

### –¢–µ—Å—Ç 2: ESP ‚Üí WiFi ‚Üí Node.js
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Node.js —Å–µ—Ä–≤–µ—Ä: `node server.js`
2. ESP –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WiFi
3. ESP –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. –í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ

### –¢–µ—Å—Ç 3: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª (STM32 ‚Üí ESP ‚Üí Server)
1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞ STM32
2. STM32 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ UART –Ω–∞ ESP
3. ESP –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ Node.js —Å–µ—Ä–≤–µ—Ä
4. –°–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: ESP –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç STM32
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ TX STM32 (PA9) ‚Üí RX ESP (GPIO3)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ RX STM32 (PA10) ‚Üí TX ESP (GPIO1)
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ baud rate –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π (115200)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â–∏–π GND

### –ü—Ä–æ–±–ª–µ–º–∞ 2: ESP –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WiFi
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å SSID –∏ –ø–∞—Ä–æ–ª—è
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ WiFi 2.4 GHz (ESP8266 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å 5 GHz)
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å ESP –±–ª–∏–∂–µ –∫ —Ä–æ—É—Ç–µ—Ä—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Serial Monitor ESP –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Node.js —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`node server.js`)
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ ESP –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP –∞–¥—Ä–µ—Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: `ifconfig` (Mac/Linux) –∏–ª–∏ `ipconfig` (Windows)
- –û–±–Ω–æ–≤–∏—Ç—å IP –≤ –∫–æ–¥–µ ESP
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall (–º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—Ç 3000)

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∫—Ä–∞–∫–æ–∑—è–±—Ä–∞–º–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å baud rate (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 115200 –≤–µ–∑–¥–µ)
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (JSON)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8

---

## üìä –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### ESP8266 LED –∏–Ω–¥–∏–∫–∞—Ü–∏—è
- **–ë—ã—Å—Ç—Ä–æ –º–∏–≥–∞–µ—Ç:** –∑–∞–≥—Ä—É–∑–∫–∞/–ø—Ä–æ—à–∏–≤–∫–∞
- **–ú–µ–¥–ª–µ–Ω–Ω–æ –º–∏–≥–∞–µ—Ç:** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WiFi
- **–ì–æ—Ä–∏—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ:** –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ WiFi, —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ù–µ –≥–æ—Ä–∏—Ç:** –Ω–µ—Ç –ø–∏—Ç–∞–Ω–∏—è –∏–ª–∏ –æ—à–∏–±–∫–∞

### STM32 LED (PC13)
- **–ú–∏–≥–∞–µ—Ç 1 —Ä–∞–∑/—Å–µ–∫:** —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- **–ë—ã—Å—Ç—Ä–æ –º–∏–≥–∞–µ—Ç:** –æ—à–∏–±–∫–∞ (Error_Handler)
- **–ì–æ—Ä–∏—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏:** –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- [ ] –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å –∫–Ω–æ–ø–æ–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ JSON —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –º–æ—Ç–æ—Ä–∞—Ö (RPM, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Server ‚Üí ESP ‚Üí STM32)

---

## üìù –ó–∞–º–µ—Ç–∫–∏

**–î–∞—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** ________________

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π ESP:** ________________

**IP –∞–¥—Ä–µ—Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:** ________________

**WiFi SSID:** ________________

**–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**
```
____________________________________
____________________________________
____________________________________
```
